{"version":3,"sources":["webpack:///./node_modules/@philly/vue-mapping/src/components/PngMarker.vue","webpack:///node_modules/@philly/vue-mapping/src/components/PngMarker.vue","webpack:///./node_modules/@philly/vue-mapping/src/components/PngMarker.vue?2931"],"names":["render","staticRenderFns","PngMarkervue_type_script_lang_js_","name","props","h","mounted","proto_initIcon","leaflet_src","prototype","_initIcon","proto_setPos","_setPos","oldIE","TRANSFORM","addInitHook","iconOptions","this","options","icon","iconAnchor","rotationOrigin","rotationAngle","on","e","target","_applyRotation","include","call","pos","_icon","style","setRotationAngle","angle","update","setRotationOrigin","origin","leafletElement","$leafletElement","createLeafletElement","map","$store","state","addTo","destroyed","_map","removeLayer","watch","nextRotationAngle","latlng","nextLatLng","methods","iconUrl","iconSize","parentMounted","parent","components_PngMarkervue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__"],"mappings":"+HAAAA,EAAAC,cCQAC,EAAA,CACAC,KAAA,YACAC,MAAA,CACA,OACA,SACA,iBAEAJ,OAPA,SAOAK,KAOAC,QAdA,WAeA,IAAAC,EAAAC,EAAA,UAAAC,UAAAC,UACAC,EAAAH,EAAA,UAAAC,UAAAG,QAEAC,EAAA,gBAAAL,EAAA,WAAAM,UAEAN,EAAA,UAAAO,YAAA,WACA,IAAAC,EAAAC,KAAAC,QAAAC,MAAAF,KAAAC,QAAAC,KAAAD,QACAE,EAAAJ,GAAAC,KAAAC,QAAAC,KAAAD,QAAAE,WACAA,IACAA,IAAA,SAAAA,EAAA,SAEAH,KAAAC,QAAAG,eAAAJ,KAAAC,QAAAG,gBAAAD,GAAA,gBACAH,KAAAC,QAAAI,cAAAL,KAAAC,QAAAI,eAAA,EAGAL,KAAAM,GAAA,gBAAAC,KAAAC,OAAAC,qBAGAlB,EAAA,UAAAmB,QAAA,CACAjB,UAAA,WACAH,EAAAqB,KAAAX,OAGAL,QAAA,SAAAiB,GACAlB,EAAAiB,KAAAX,KAAAY,GACAZ,KAAAS,kBAGAA,eAAA,WACAT,KAAAC,QAAAI,gBACAL,KAAAa,MAAAC,MAAAvB,EAAA,WAAAM,UAAA,UAAAG,KAAAC,QAAAG,eAEAR,EAEAI,KAAAa,MAAAC,MAAAvB,EAAA,WAAAM,WAAA,UAAAG,KAAAC,QAAAI,cAAA,OAGAL,KAAAa,MAAAC,MAAAvB,EAAA,WAAAM,YAAA,YAAAG,KAAAC,QAAAI,cAAA,SAKAU,iBAAA,SAAAC,GAGA,OAFAhB,KAAAC,QAAAI,cAAAW,EACAhB,KAAAiB,SACAjB,MAGAkB,kBAAA,SAAAC,GAGA,OAFAnB,KAAAC,QAAAG,eAAAe,EACAnB,KAAAiB,SACAjB,QAIA,IAAAoB,EAAApB,KAAAqB,gBAAArB,KAAAsB,uBACAC,EAAAvB,KAAAwB,OAAAC,MAAAF,QAGAA,GACAH,EAAAM,MAAAH,IAGAI,UA9EA,WAgFA3B,KAAAqB,gBAAAO,KAAAC,YAAA7B,KAAAqB,kBAEAS,MAAA,CACAzB,cADA,SACA0B,GAEA/B,KAAAqB,gBAAAO,KAAAC,YAAA7B,KAAAqB,iBACA,IAAAD,EAAApB,KAAAqB,gBAAArB,KAAAsB,uBACAC,EAAAvB,KAAAwB,OAAAC,MAAAF,QAGAA,GACAH,EAAAM,MAAAH,IAGAS,OAZA,SAYAC,GAEAjC,KAAAqB,gBAAAO,KAAAC,YAAA7B,KAAAqB,iBACA,IAAAD,EAAApB,KAAAqB,gBAAArB,KAAAsB,uBACAC,EAAAvB,KAAAwB,OAAAC,MAAAF,QAGAA,GACAH,EAAAM,MAAAH,KAIAW,QAAA,CACAZ,qBADA,WAIA,IAAApB,EAAAX,EAAA,SACA4C,QAAAnC,KAAAE,KACAkC,SAAA,QACAjC,WAAA,SAIA,OAAAZ,EAAA,UAAAS,KAAAgC,OAAA,CACA9B,OACAG,cAAAL,KAAAK,iBAGAgC,cAhBA,SAgBAC,GACA,IAAAf,EAAAe,EAAAjB,gBACArB,KAAAqB,gBAAAK,MAAAH,MCpIgTgB,EAAA,cFOhTC,EAAgBC,OAAAC,EAAA,KAAAD,CACdF,EACFxD,EACAC,GACA,EACA,KACA,KACA,MAIe2D,EAAA,WAAAH","file":"js/lbmp_pvm_PngMarker.8cc46862.js","sourcesContent":["var render, staticRenderFns\nimport script from \"./PngMarker.vue?vue&type=script&lang=js&\"\nexport * from \"./PngMarker.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<!--\r\n  wraps Leaflet.vector-markers as a vue component\r\n  https://github.com/hiasinho/Leaflet.vector-markers\r\n-->\r\n\r\n<script>\r\n  import * as L from 'leaflet';\r\n\r\n  export default {\r\n    name: 'PngMarker',\r\n    props: [\r\n      'icon',\r\n      'latlng',\r\n      'rotationAngle'\r\n    ],\r\n    render(h) {\r\n      // for some reason, the react prop that `this.orientation` depends on has\r\n      // to be evaluated once in order to receive updates.\r\n      // this.orientation;\r\n\r\n      return;\r\n    },\r\n    mounted() {\r\n      var proto_initIcon = L.Marker.prototype._initIcon;\r\n      var proto_setPos = L.Marker.prototype._setPos;\r\n\r\n      var oldIE = (L.DomUtil.TRANSFORM === 'msTransform');\r\n\r\n      L.Marker.addInitHook(function () {\r\n          var iconOptions = this.options.icon && this.options.icon.options;\r\n          var iconAnchor = iconOptions && this.options.icon.options.iconAnchor;\r\n          if (iconAnchor) {\r\n              iconAnchor = (iconAnchor[0] + 'px ' + iconAnchor[1] + 'px');\r\n          }\r\n          this.options.rotationOrigin = this.options.rotationOrigin || iconAnchor || 'center bottom' ;\r\n          this.options.rotationAngle = this.options.rotationAngle || 0;\r\n\r\n          // Ensure marker keeps rotated during dragging\r\n          this.on('drag', function(e) { e.target._applyRotation(); });\r\n      });\r\n\r\n      L.Marker.include({\r\n          _initIcon: function() {\r\n              proto_initIcon.call(this);\r\n          },\r\n\r\n          _setPos: function (pos) {\r\n              proto_setPos.call(this, pos);\r\n              this._applyRotation();\r\n          },\r\n\r\n          _applyRotation: function () {\r\n              if(this.options.rotationAngle) {\r\n                  this._icon.style[L.DomUtil.TRANSFORM+'Origin'] = this.options.rotationOrigin;\r\n\r\n                  if(oldIE) {\r\n                      // for IE 9, use the 2D rotation\r\n                      this._icon.style[L.DomUtil.TRANSFORM] = 'rotate(' + this.options.rotationAngle + 'deg)';\r\n                  } else {\r\n                      // for modern browsers, prefer the 3D accelerated version\r\n                      this._icon.style[L.DomUtil.TRANSFORM] += ' rotateZ(' + this.options.rotationAngle + 'deg)';\r\n                  }\r\n              }\r\n          },\r\n\r\n          setRotationAngle: function(angle) {\r\n              this.options.rotationAngle = angle;\r\n              this.update();\r\n              return this;\r\n          },\r\n\r\n          setRotationOrigin: function(origin) {\r\n              this.options.rotationOrigin = origin;\r\n              this.update();\r\n              return this;\r\n          }\r\n      });\r\n\r\n      const leafletElement = this.$leafletElement = this.createLeafletElement();\r\n      const map = this.$store.state.map.map;\r\n\r\n      // REVIEW kind of hacky/not reactive?\r\n      if (map) {\r\n        leafletElement.addTo(map);\r\n      }\r\n    },\r\n    destroyed() {\r\n      //console.log('pngMarker destroyed fired, latlng is', this.latlng);\r\n      this.$leafletElement._map.removeLayer(this.$leafletElement);\r\n    },\r\n    watch: {\r\n      rotationAngle(nextRotationAngle) {\r\n        // console.log('pngMarker orientation changed', nextRotationAngle);\r\n        this.$leafletElement._map.removeLayer(this.$leafletElement);\r\n        const leafletElement = this.$leafletElement = this.createLeafletElement();\r\n        const map = this.$store.state.map.map;\r\n\r\n        // REVIEW kind of hacky/not reactive?\r\n        if (map) {\r\n          leafletElement.addTo(map);\r\n        }\r\n      },\r\n      latlng(nextLatLng) {\r\n        // console.log('pngMarker orientation changed', nextRotationAngle);\r\n        this.$leafletElement._map.removeLayer(this.$leafletElement);\r\n        const leafletElement = this.$leafletElement = this.createLeafletElement();\r\n        const map = this.$store.state.map.map;\r\n\r\n        // REVIEW kind of hacky/not reactive?\r\n        if (map) {\r\n          leafletElement.addTo(map);\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      createLeafletElement() {\r\n        // console.log('pngMarker createLeafletElement is running');\r\n\r\n        const icon = L.icon({\r\n            iconUrl: this.icon,\r\n            iconSize: [26, 16],\r\n            iconAnchor: [11, 8],\r\n          })\r\n\r\n        // console.log('createLeafletElement is running, this.latlng:', this.latlng);\r\n        return L.marker(this.latlng, {\r\n          icon: icon,\r\n          rotationAngle: this.rotationAngle,\r\n        });\r\n      },\r\n      parentMounted(parent) {\r\n        const map = parent.$leafletElement;\r\n        this.$leafletElement.addTo(map);\r\n      },\r\n    }\r\n  };\r\n</script>\r\n","import mod from \"-!../../../../cache-loader/dist/cjs.js??ref--12-0!../../../../thread-loader/dist/cjs.js!../../../../babel-loader/lib/index.js!../../../../cache-loader/dist/cjs.js??ref--0-0!../../../../vue-loader/lib/index.js??vue-loader-options!./PngMarker.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../cache-loader/dist/cjs.js??ref--12-0!../../../../thread-loader/dist/cjs.js!../../../../babel-loader/lib/index.js!../../../../cache-loader/dist/cjs.js??ref--0-0!../../../../vue-loader/lib/index.js??vue-loader-options!./PngMarker.vue?vue&type=script&lang=js&\""],"sourceRoot":""}