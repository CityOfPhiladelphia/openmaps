{"version":3,"sources":["webpack:///node_modules/@philly/vue-mapping/src/pictometry/PngMarker.vue","webpack:///./node_modules/@philly/vue-mapping/src/pictometry/PngMarker.vue","webpack:///./node_modules/@philly/vue-mapping/src/pictometry/PngMarker.vue?d3a1"],"names":["render","staticRenderFns","PngMarkervue_type_script_lang_js_","name","props","h","computed","ipa","this","$store","state","pictometry","mounted","placeMarker","$props","latlng","beforeDestroy","removeShapes","pngMarkerIds","watch","nextLatlng","methods","constructLocalUrl","host","path1","path2","url","window","location","protocol","port","hostname","pngMarker","type","SHAPE_TYPE","MARKER","center","y","x","markerImageHeight","height","markerImageWidth","width","markerOffsetX","offsetX","markerOffsetY","offsetY","markerImage","icon","onShapeClick","addShapes","didAddShapes","result","i","length","success","console","log","error","push","shapeId","pictometry_PngMarkervue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__"],"mappings":"uIACA,ICDAA,EAAAC,EDCAC,EAAA,CACAC,KAAA,sBACAC,MAAA,CACA,OACA,SACA,SACA,SAEAJ,OARA,SAQAK,KAGAC,SAAA,CACAC,IADA,WAEA,OAAAC,KAAAC,OAAAC,MAAAC,WAAAJ,MAGAK,QAhBA,WAkBAJ,KAAAK,YAAAL,KAAAM,OAAAC,SAEAC,cApBA,WAsBAR,KAAAD,IAAAU,aAAAT,KAAAC,OAAAC,MAAAC,WAAAO,eAQAC,MAAA,CACAJ,OADA,SACAK,GAEAZ,KAAAD,IAAAU,aAAAT,KAAAC,OAAAC,MAAAC,WAAAO,cACAV,KAAAK,YAAAO,KAGAC,QAAA,CACAC,kBADA,SACAC,EAAAC,EAAAC,GACA,IAAAC,EASA,OANAA,EAFA,WAAAC,OAAAC,SAAAC,SAEA,WAAAN,EAAAC,EAAAC,EAGA,UAAAF,EAAAC,EAAAC,EAGAC,GAEAb,YAbA,SAaAO,GAEA,IACAG,EADAO,EAAAH,OAAAC,SAAAE,KAGAP,EADA,IAAAO,EACAH,OAAAC,SAAAG,SAAA,IAAAD,EAEAH,OAAAC,SAAAG,SAEA,IAAAC,EAAA,CACAC,KAAAzB,KAAAD,IAAA2B,WAAAC,OACAC,OAAA,CAAAC,EAAAjB,EAAA,GAAAkB,EAAAlB,EAAA,IACAmB,kBAAA/B,KAAAM,OAAA0B,OACAC,iBAAAjC,KAAAM,OAAA4B,MACAC,cAAAnC,KAAAM,OAAA8B,QACAC,cAAArC,KAAAM,OAAAgC,QACAC,YAAAvC,KAAAc,kBAAAC,EAAA,IAAAf,KAAAM,OAAAkC,MACAC,aAAA,QAEAzC,KAAAD,IAAA2C,UAAA,CAAAlB,GAAAxB,KAAA2C,eAEAA,aAlCA,SAkCAC,GAKA,QAAAC,EAAA,EAAAA,EAAAD,EAAAE,OAAAD,IACA,aAAAD,EAAAC,GAAAE,QACAC,QAAAC,IAAAL,EAAAC,GAAAK,WACA,CACA,IAAAxC,EAAAV,KAAAC,OAAAC,MAAAC,WAAAO,aAEAA,EAAAyC,KAAAP,EAAAC,GAAAO,aEnFgTC,EAAA,cDOhTC,EAAgBC,OAAAC,EAAA,KAAAD,CACdF,EACF7D,EACAC,GACA,EACA,KACA,KACA,MAIegE,EAAA,WAAAH","file":"js/mbmb_pvm_PictometryPngMarker.f2c473c8.js","sourcesContent":["<script>\r\n  export default {\r\n    name: 'PictometryPngMarker',\r\n    props: [\r\n      'icon',\r\n      'latlng',\r\n      'height',\r\n      'width'\r\n    ],\r\n    render(h) {\r\n      return;\r\n    },\r\n    computed: {\r\n      ipa() {\r\n        return this.$store.state.pictometry.ipa;\r\n      },\r\n    },\r\n    mounted() {\r\n      // console.log('mounting PngMarker', this.icon);\r\n      this.placeMarker(this.$props.latlng);\r\n    },\r\n    beforeDestroy() {\r\n      // console.log('before destroying PngMarker', this.icon);\r\n      this.ipa.removeShapes(this.$store.state.pictometry.pngMarkerIds);\r\n      // console.log('before destroyed PngMarker', this.icon);\r\n    },\r\n    // destroyed() {\r\n    //   console.log('destroying PngMarker', this.icon);\r\n    //   this.ipa.removeShapes(this.$store.state.pictometry.pngMarkerIds);\r\n    //   console.log('destroyed PngMarker', this.icon);\r\n    // },\r\n    watch: {\r\n      latlng(nextLatlng) {\r\n        // console.log('PngMarker: latlng changed');\r\n        this.ipa.removeShapes(this.$store.state.pictometry.pngMarkerIds);\r\n        this.placeMarker(nextLatlng);\r\n      }\r\n    },\r\n    methods: {\r\n      constructLocalUrl(host, path1, path2) {\r\n        let url;\r\n        if (window.location.protocol === 'https:') {\r\n          // console.log('using https', window.location.protocol);\r\n          url = 'https://' + host + path1 + path2;\r\n        } else {\r\n          // console.log('using http', window.location.protocol);\r\n          url = 'http://' + host + path1 + path2;\r\n        }\r\n        // console.log('constructing url:', url);\r\n        return url\r\n      },\r\n      placeMarker(nextLatlng) {\r\n        // console.log('starting placeMarker', nextLatlng, this.$props.icon, 'this.ipa:', this.ipa);\r\n        const port = window.location.port;\r\n        let host;\r\n        if (port != '') {\r\n          host = window.location.hostname + ':' + port;\r\n        } else {\r\n          host = window.location.hostname;\r\n        }\r\n        const pngMarker = {\r\n          type : this.ipa.SHAPE_TYPE.MARKER,\r\n          center: { y: nextLatlng[0], x: nextLatlng[1]},\r\n          markerImageHeight: this.$props.height,\r\n          markerImageWidth: this.$props.width,\r\n          markerOffsetX: this.$props.offsetX,\r\n          markerOffsetY: this.$props.offsetY,\r\n          markerImage: this.constructLocalUrl(host, '/', this.$props.icon),\r\n          onShapeClick: 'true'\r\n        };\r\n        this.ipa.addShapes([pngMarker], this.didAddShapes)\r\n      },\r\n      didAddShapes(result) {\r\n        // const pngMarkerIds = shapes.filter(shape => {\r\n        //                         return shape.success === 'true';\r\n        //                       }).map(shape => shape.shapeId);\r\n        // this.$store.commit('setPictometryPngMarkerIds', pngMarkerIds);\r\n        for ( var i = 0; i < result.length; i++) {\r\n          if ( result[i].success === 'false' ) {\r\n            console.log(result[i].error);\r\n          } else {\r\n            const pngMarkerIds = this.$store.state.pictometry.pngMarkerIds;\r\n            // console.log('pngMarkerIds', pngMarkerIds);\r\n            pngMarkerIds.push(result[i].shapeId);\r\n\r\n          }\r\n        }\r\n      },\r\n    }\r\n  };\r\n</script>\r\n","var render, staticRenderFns\nimport script from \"./PngMarker.vue?vue&type=script&lang=js&\"\nexport * from \"./PngMarker.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../cache-loader/dist/cjs.js??ref--12-0!../../../../thread-loader/dist/cjs.js!../../../../babel-loader/lib/index.js!../../../../cache-loader/dist/cjs.js??ref--0-0!../../../../vue-loader/lib/index.js??vue-loader-options!./PngMarker.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../cache-loader/dist/cjs.js??ref--12-0!../../../../thread-loader/dist/cjs.js!../../../../babel-loader/lib/index.js!../../../../cache-loader/dist/cjs.js??ref--0-0!../../../../vue-loader/lib/index.js??vue-loader-options!./PngMarker.vue?vue&type=script&lang=js&\""],"sourceRoot":""}