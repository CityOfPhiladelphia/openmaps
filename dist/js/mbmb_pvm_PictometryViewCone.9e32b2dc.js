(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["mbmb_pvm_PictometryViewCone"],{e249:function(t,e,o){"use strict";o.r(e);var i,a,s=o("59ad"),n=o.n(s),h={name:"PictometryViewCone",props:["latlng","rotationAngle","hFov"],render:function(t){},computed:{ipa:function(){return this.$store.state.pictometry.ipa},zoom:function(){return this.$store.state.pictometry.zoom},radius:function(){var t={17:75,18:50,19:25,20:15,21:10,22:10,23:10,24:10};return t[this.zoom]}},mounted:function(){this.getViewConeLatLon()},beforeDestroy:function(){this.ipa.removeShapes(this.$store.state.pictometry.shapeIds)},watch:{radius:function(t){this.getViewConeLatLon()},rotationAngle:function(){this.ipa.removeShapes(this.$store.state.pictometry.shapeIds),this.getViewConeLatLon()},latlng:function(){this.ipa.removeShapes(this.$store.state.pictometry.shapeIds),this.getViewConeLatLon()}},methods:{getViewConeLatLon:function(){var t=this.latlng[0],e=this.latlng[1],o=6378137,i=this.radius,a=this.rotationAngle,s=180*n()(this.hFov)/Math.PI,h=Math.cos((a+s/2)*Math.PI/180)*i,r=Math.sin((a+s/2)*Math.PI/180)*i,p=Math.cos((a-s/2)*Math.PI/180)*i,c=Math.sin((a-s/2)*Math.PI/180)*i,l=h/o,u=r/(o*Math.cos(Math.PI*t/180)),m=p/o,d=c/(o*Math.cos(Math.PI*t/180)),f=t+180*l/Math.PI,M=e+180*u/Math.PI,I=t+180*m/Math.PI,w=e+180*d/Math.PI,P=[{y:t,x:e,z:0},{y:f,x:M,z:0},{y:I,x:w,z:0}];this.placeViewCone(P)},placeViewCone:function(t){var e=this,o={type:this.ipa.SHAPE_TYPE.POLYGON,coordinates:t,strokeColor:"#00a0ee",strokeOpacity:.75,strokeWeight:2,fillColor:"#00a0ee",fillOpacity:.25,altitudeMode:this.ipa.ALTITUDE_MODE.RELATIVE_TO_GROUND};this.ipa.addShapes([o],function(t){for(var o=0;o<t.length;o++)if("false"===t[o].success)alert(t[o].error);else{var i=e.$store.state.pictometry.shapeIds;i.push(t[o].shapeId);i.slice(0,-1);e.ipa.removeShapes(i.slice(0,-1))}})}}},r=h,p=o("2877"),c=Object(p["a"])(r,i,a,!1,null,null,null);e["default"]=c.exports}}]);
//# sourceMappingURL=mbmb_pvm_PictometryViewCone.9e32b2dc.js.map